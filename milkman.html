<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Milk Record Tracker</title>
<style>
  body { font-family: Arial, sans-serif; padding: 20px; max-width: 600px; margin: auto; }
  h1 { text-align: center; }
  table { width: 100%; border-collapse: collapse; margin-top: 20px; }
  th, td { border: 1px solid #ccc; padding: 8px; text-align: center; }
  input { width: 80px; }
  button { margin-top: 10px; padding: 10px; width: 100%; }
</style>
</head>
<body>

<h1>Milk Record Tracker</h1>

<label>Date: <input type="date" id="date"></label><br><br>
<label>Liters: <input type="number" id="liters" min="0" step="0.1"></label><br><br>
<label>Price per Liter: <input type="number" id="price" min="0" step="0.1"></label><br><br>
<label>Amount Paid: <input type="number" id="paid" min="0" step="0.1"></label><br><br>

<button onclick="addRecord()">Add Record</button>

<h2>Monthly Records</h2>
<table>
  <thead>
    <tr>
      <th>Date</th>
      <th>Liters</th>
      <th>Price/Liter</th>
      <th>Total</th>
      <th>Paid</th>
    </tr>
  </thead>
  <tbody id="recordTable"></tbody>
  <tfoot>
    <tr>
      <td colspan="3"><strong>Monthly Total</strong></td>
      <td id="monthlyTotal">0</td>
      <td id="monthlyPaid">0</td>
    </tr>
  </tfoot>
</table>

<script>
  // Load saved records from localStorage
  let records = JSON.parse(localStorage.getItem('milkRecords')) || [];

  function updateTable() {
    const table = document.getElementById('recordTable');
    table.innerHTML = '';
    let total = 0, paidTotal = 0;

    records.forEach(r => {
      const row = document.createElement('tr');
      const dailyTotal = r.liters * r.price;
      row.innerHTML = `
        <td>${r.date}</td>
        <td>${r.liters}</td>
        <td>${r.price}</td>
        <td>${dailyTotal.toFixed(2)}</td>
        <td>${r.paid}</td>
      `;
      table.appendChild(row);
      total += dailyTotal;
      paidTotal += r.paid;
    });

    document.getElementById('monthlyTotal').innerText = total.toFixed(2);
    document.getElementById('monthlyPaid').innerText = paidTotal.toFixed(2);
  }

  function addRecord() {
    const date = document.getElementById('date').value;
    const liters = parseFloat(document.getElementById('liters').value);
    const price = parseFloat(document.getElementById('price').value);
    const paid = parseFloat(document.getElementById('paid').value);

    if (!date || isNaN(liters) || isNaN(price) || isNaN(paid)) {
      alert('Please fill all fields!');
      return;
    }

    // Check if record for this date exists, update it
    const existingIndex = records.findIndex(r => r.date === date);
    if (existingIndex >= 0) {
      records[existingIndex] = { date, liters, price, paid };
    } else {
      records.push({ date, liters, price, paid });
    }

    localStorage.setItem('milkRecords', JSON.stringify(records));
    updateTable();

    // Clear inputs
    document.getElementById('liters').value = '';
    document.getElementById('price').value = '';
    document.getElementById('paid').value = '';
  }

  updateTable(); // initial load
</script>

</body>
</html>